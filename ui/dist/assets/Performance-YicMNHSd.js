import{p as L,f as $,r as a,j as e,e as k,a as N,T as b,b as F,F as A}from"./index-CJAOEYsQ.js";import{E as m}from"./ErrorBoundary-BV10QnMf.js";import{R as C}from"./refresh-cw-Uhijyyid.js";import{T as P}from"./trending-down-BU5SXYMF.js";import{C as O}from"./calendar-Dn6HfuTh.js";const W=()=>{const{trades:v,getTradesByUser:w}=L(),{user:f}=$(),[l,y]=a.useState(()=>localStorage.getItem("performance_filterStatus")||"all"),[o,S]=a.useState(()=>localStorage.getItem("performance_dateRange")||"all"),[c,h]=a.useState(!1),[u,p]=a.useState(null);a.useEffect(()=>{localStorage.setItem("performance_filterStatus",l)},[l]),a.useEffect(()=>{localStorage.setItem("performance_dateRange",o)},[o]);const T=f?w(f.id):v,t=(()=>{const s=new Date;return T.filter(n=>{if(o==="all")return!0;const R=n.entryDate,x=Math.floor((s.getTime()-R.getTime())/(1e3*60*60*24));switch(o){case"7d":return x<=7;case"30d":return x<=30;case"90d":return x<=90;default:return!0}})})().filter(s=>l==="all"||l==="successful"&&s.isSuccessful||l==="unsuccessful"&&s.isSuccessful===!1),r=t.filter(s=>s.isSuccessful),i=t.filter(s=>s.isSuccessful===!1),d=t.reduce((s,n)=>s+(n.profit||0),0),D=t.length>0?r.length/t.length*100:0,j=s=>s===!0?"text-green-400 bg-green-900/30 border border-green-700/50":s===!1?"text-red-400 bg-red-900/30 border border-red-700/50":"text-yellow-400 bg-yellow-900/30 border border-yellow-700/50",g=s=>s===!0?"Successful":s===!1?"Unsuccessful":"Open",E=()=>{h(!0),p(null),setTimeout(()=>{h(!1)},1e3)};return e.jsxs("div",{className:"p-4 md:p-6 space-y-4 md:space-y-6",children:[u&&e.jsx("div",{className:"professional-card p-4 border border-red-700/50 bg-red-900/20",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(k,{className:"w-5 h-5 text-red-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-400",children:u}),e.jsx("button",{onClick:()=>p(null),className:"text-red-400 hover:text-red-300 text-sm mt-2",children:"Dismiss"})]})]})}),e.jsxs("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-slate-200 font-mono",children:"PERFORMANCE"}),e.jsx("p",{className:"text-slate-400 mt-1 text-base md:text-lg font-mono",children:"Track your trading performance and recommendations"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-green-900/30 border border-green-700/50 rounded-sm",children:[e.jsx(N,{className:"w-4 h-4 text-green-400"}),e.jsxs("span",{className:"text-sm font-mono text-green-300",children:[t.length," Trades"]})]}),e.jsxs("button",{onClick:E,disabled:c,className:"flex items-center space-x-2 px-3 py-2 bg-slate-800/60 border border-slate-600/50 rounded-sm hover:bg-slate-700/60 transition-all duration-200 text-sm",children:[e.jsx(C,{className:`w-4 h-4 text-green-400 ${c?"animate-spin":""}`}),e.jsx("span",{className:"text-slate-300 font-mono",children:"REFRESH"})]})]})]}),e.jsx(m,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6",children:[e.jsxs("div",{className:"professional-card p-4 md:p-6 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-green-900/30 rounded-xl flex items-center justify-center border border-green-700/50",children:e.jsx(b,{className:"w-5 h-5 md:w-6 md:h-6 text-green-400"})}),e.jsx("span",{className:"text-sm text-green-400 font-medium font-mono",children:"Total P&L"})]}),e.jsxs("div",{className:"text-xl md:text-2xl font-bold text-slate-200 mb-1 font-mono",children:["₹",d.toLocaleString()]}),e.jsxs("div",{className:`text-sm ${d>=0?"text-green-400":"text-red-400"} font-mono`,children:[d>=0?"+":"",(d/1e5*100).toFixed(2),"%"]})]}),e.jsxs("div",{className:"professional-card p-4 md:p-6 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-blue-900/30 rounded-xl flex items-center justify-center border border-blue-700/50",children:e.jsx(F,{className:"w-5 h-5 md:w-6 md:h-6 text-blue-400"})}),e.jsx("span",{className:"text-sm text-blue-400 font-medium font-mono",children:"Win Rate"})]}),e.jsxs("div",{className:"text-xl md:text-2xl font-bold text-slate-200 mb-1 font-mono",children:[D.toFixed(1),"%"]}),e.jsxs("div",{className:"text-sm text-slate-400 font-mono",children:[r.length,"/",t.length," trades"]})]}),e.jsxs("div",{className:"professional-card p-4 md:p-6 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-green-900/30 rounded-xl flex items-center justify-center border border-green-700/50",children:e.jsx(b,{className:"w-5 h-5 md:w-6 md:h-6 text-green-400"})}),e.jsx("span",{className:"text-sm text-green-400 font-medium font-mono",children:"Successful"})]}),e.jsx("div",{className:"text-xl md:text-2xl font-bold text-green-400 mb-1 font-mono",children:r.length}),e.jsxs("div",{className:"text-sm text-slate-400 font-mono",children:["Avg: ₹",r.length>0?(r.reduce((s,n)=>s+(n.profit||0),0)/r.length).toLocaleString():"0"]})]}),e.jsxs("div",{className:"professional-card p-4 md:p-6 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-red-900/30 rounded-xl flex items-center justify-center border border-red-700/50",children:e.jsx(P,{className:"w-5 h-5 md:w-6 md:h-6 text-red-400"})}),e.jsx("span",{className:"text-sm text-red-400 font-medium font-mono",children:"Unsuccessful"})]}),e.jsx("div",{className:"text-xl md:text-2xl font-bold text-red-400 mb-1 font-mono",children:i.length}),e.jsxs("div",{className:"text-sm text-slate-400 font-mono",children:["Avg: ₹",i.length>0?(i.reduce((s,n)=>s+(n.profit||0),0)/i.length).toLocaleString():"0"]})]})]})}),e.jsx(m,{children:e.jsx("div",{className:"professional-card p-4 border border-slate-700/50",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{className:"w-4 h-4 text-slate-400"}),e.jsxs("select",{value:l,onChange:s=>y(s.target.value),className:"px-3 py-2 bg-slate-800/60 border border-slate-600/50 rounded-sm text-slate-200 focus:outline-none focus:ring-1 focus:ring-green-500/50 focus:border-green-500/50 text-sm font-mono",children:[e.jsx("option",{value:"all",children:"All Trades"}),e.jsx("option",{value:"successful",children:"Successful Only"}),e.jsx("option",{value:"unsuccessful",children:"Unsuccessful Only"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(O,{className:"w-4 h-4 text-slate-400"}),e.jsxs("select",{value:o,onChange:s=>S(s.target.value),className:"px-3 py-2 bg-slate-800/60 border border-slate-600/50 rounded-sm text-slate-200 focus:outline-none focus:ring-1 focus:ring-green-500/50 focus:border-green-500/50 text-sm font-mono",children:[e.jsx("option",{value:"all",children:"All Time"}),e.jsx("option",{value:"7d",children:"Last 7 Days"}),e.jsx("option",{value:"30d",children:"Last 30 Days"}),e.jsx("option",{value:"90d",children:"Last 3 Months"})]})]})]})})}),e.jsx(m,{children:e.jsxs("div",{className:"professional-card overflow-hidden border border-slate-700/50",children:[e.jsx("div",{className:"p-4 md:p-6 border-b border-slate-700/50",children:e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-slate-200 font-mono",children:"TRADE HISTORY"})}),c?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-400"}),e.jsx("p",{className:"text-slate-400 font-mono",children:"LOADING TRADES..."})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"md:hidden",children:t.map(s=>e.jsxs("div",{className:"p-4 border-b border-slate-700/50 last:border-b-0",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-medium text-slate-200 font-mono",children:s.stockSymbol}),e.jsx("div",{className:"text-sm text-slate-400 font-mono",children:s.stockName})]}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-sm ${j(s.isSuccessful)}`,children:g(s.isSuccessful)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm mb-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-400 font-mono",children:"Entry:"}),e.jsxs("div",{className:"font-medium text-slate-300 font-mono",children:["₹",s.entryPrice]}),e.jsx("div",{className:"text-xs text-slate-500 font-mono",children:s.entryDate.toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-400 font-mono",children:"Exit:"}),e.jsx("div",{className:"font-medium text-slate-300 font-mono",children:s.exitPrice?`₹${s.exitPrice}`:"-"}),e.jsx("div",{className:"text-xs text-slate-500 font-mono",children:s.exitDate?s.exitDate.toLocaleDateString():"-"})]})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("div",{className:`text-sm font-medium ${(s.profit||0)>=0?"text-green-400":"text-red-400"} font-mono`,children:s.profit?`₹${s.profit.toLocaleString()}`:"-"}),e.jsx("div",{className:`text-xs ${(s.percentage||0)>=0?"text-green-400":"text-red-400"} font-mono`,children:s.percentage?`${s.percentage>=0?"+":""}${s.percentage}%`:"-"})]})}),e.jsx("div",{className:"mt-2 text-xs text-slate-400 line-clamp-2 font-mono",children:s.recommendation})]},s.id))}),e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-800/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider font-mono",children:"Stock"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider font-mono",children:"Entry"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider font-mono",children:"Exit"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider font-mono",children:"P&L"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider font-mono",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-300 uppercase tracking-wider font-mono",children:"Recommendation"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-700/50",children:t.map(s=>e.jsxs("tr",{className:"hover:bg-slate-800/30",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-200 font-mono",children:s.stockSymbol}),e.jsx("div",{className:"text-sm text-slate-400 font-mono",children:s.stockName})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm text-slate-300 font-mono",children:["₹",s.entryPrice]}),e.jsx("div",{className:"text-sm text-slate-500 font-mono",children:s.entryDate.toLocaleDateString()})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-slate-300 font-mono",children:s.exitPrice?`₹${s.exitPrice}`:"-"}),e.jsx("div",{className:"text-sm text-slate-500 font-mono",children:s.exitDate?s.exitDate.toLocaleDateString():"-"})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:`text-sm font-medium ${(s.profit||0)>=0?"text-green-400":"text-red-400"} font-mono`,children:s.profit?`₹${s.profit.toLocaleString()}`:"-"}),e.jsx("div",{className:`text-sm ${(s.percentage||0)>=0?"text-green-400":"text-red-400"} font-mono`,children:s.percentage?`${s.percentage>=0?"+":""}${s.percentage}%`:"-"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-sm ${j(s.isSuccessful)} font-mono`,children:g(s.isSuccessful)})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-slate-300 max-w-xs truncate font-mono",title:s.recommendation,children:s.recommendation})})]},s.id))})]})})]})]})}),t.length===0&&!c&&e.jsxs("div",{className:"professional-card p-8 md:p-12 text-center border border-slate-700/50",children:[e.jsx(N,{className:"w-12 h-12 md:w-16 md:h-16 text-slate-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-200 mb-2 font-mono",children:"NO TRADES FOUND"}),e.jsx("p",{className:"text-slate-400 font-mono",children:"Start trading to see your performance here"})]})]})};export{W as default};
